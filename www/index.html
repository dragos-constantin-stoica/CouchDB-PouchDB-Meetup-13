<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: content: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">

    <title>Kanban</title>

    <script src="components/loader.js"></script>
    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="css/style.css">

    <link rel="stylesheet" type="text/css" href="webix/skins/touch.css">
    <script type="text/javascript" src="webix/webix.js"></script>
    <title>Kanban</title>
    
    
</head>
<body>

        <script type="text/javascript">
            function handleBack(){
                if (!$$("list").isVisible()){
                    $$("list").show();
                    $$("mainbar").showBatch("main");
                }
            }
            document.addEventListener("deviceready", function(){
                document.addEventListener("backbutton", handleBack, false);
            }, false);
            app.initialize();
        </script>

        <script type="text/javascript">
        webix.ready(function(){
            var toolbar = { 
                view:"toolbar",
                id:"mainbar",
                visibleBatch:"main",
                elements:[
                    { view: "template", template: "ÂµKanaban", type: "clean", batch: "main", height:32},
                    { view:"button", value:"Back", width:150, batch:"details", click: handleBack}
                ]
            };
            
            
            
            var list = { 
                view:"unitlist", id:"list", 
                uniteBy:function(obj){
                    return obj.lastname.substr(0,1);
                },
                template:"html->item_list",
                url:"contacts.json?1",
                on:{
                    onItemClick:function(id){
                        $$("mainbar").showBatch("details");
                        $$('details').show();
                        $$('details').setValues(this.getItem(id));
                    }
                }
            };
            
            var template = { template:"html->item_details", scroll:true, id:"details" };
            
            var accordion = {
                view:"accordion",
                multi:true,
                rows:[ //or rows 
                    { header:"TO DO", body:"content 1" }, 
                    { header:"WIP", body:"content 2" },
                    { header:"DONE", body:"content 3" },
                    {}
                ]
            };
            
            webix.ui.fullScreen();
            
            webix.ui({
                rows:[
                    toolbar,
                    { cells:[ accordion, template], id:"multiview" }
                ]
            });
        });
        </script>


    <div id="item_list" style="display:none">
        #firstname# #lastname# <span style='float:right; color:#aaa'>#zip#</span>
    </div>

    <div id="item_details" style="display:none">
        <h2>#firstname# #lastname#</h2>
        <div class='infoline'><strong>Email:</strong> #email#</div>
        <div class='infoline'><h4>Phone</h4> #phone#</div>
        <div class='infoline'><h4>Address</h4> #city# #zip#</div>
        <div class='infoline'><h4>Works at</h4> #work#</div>
        <p style='max-width:320px'>#details#</p>
    </div>


</body>
</html>
