<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: content: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">

    <title>Kanban</title>

    <script src="components/loader.js"></script>
    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="css/style.css">

    <link rel="stylesheet" type="text/css" href="webix/skins/touch.css">
    <script type="text/javascript" src="webix/webix.js"></script>
    <title>Kanban</title>
    
    
</head>
<body>

        <script type="text/javascript">
            function handleBack(){
                if (!$$("accordion").isVisible()){
                    $$("accordion").show();
                    $$("mainbar").showBatch("main");
                }
            }
            document.addEventListener("deviceready", function(){
                document.addEventListener("backbutton", handleBack, false);
            }, false);
            app.initialize();
    </script>
    <script type="text/javascript">
        webix.ready(function(){
            var toolbar = { 
                view:"toolbar",
                id:"mainbar",
                visibleBatch:"main",
                elements:[
                    { view: "template", template: "ÂµKanaban", type: "clean", batch: "main", height:42},
                    { view:"button", value:"Back", width:150, batch:"details", click: handleBack}
                ]
            };
            
            
            var template = { template:"html->item_details", scroll:true, id:"details" };
            
            var accordion = {
                view:"accordion",
                id: "accordion",
                multi:"mixed",
                rows:[ //or rows 
                    { header:"TO DO", 
                        body:{
                            view:"list",
                            id: "todo",
                            template:"<b>#id#</b>. #description#",
                            data:{id:1, description:"my 1st task", tag:"todo"},
                            on:{
                                onItemClick:function(id){
                                    $$("mainbar").showBatch("details");
                                    $$('details').show();
                                    $$('details').setValues(this.getItem(id));
                                }
                            }
                        } 
                    }, 
                    { header:"WIP",
                        body:{
                            view:"list",
                            id: "wip",
                            template:"<b>#id#</b>. #description#",
                            data:{id:1, description:"my 2nd task", tag:"wip"},
                            on:{
                                onItemClick:function(id){
                                    $$("mainbar").showBatch("details");
                                    $$('details').show();
                                    $$('details').setValues(this.getItem(id));
                                }
                            }
                        } 
                    },
                    { header:"DONE",
                        body:{
                            view:"list",
                            id: "done",
                            template:"<b>#id#</b>. #description#",
                            data:{id:1, description:"my 23nd task", tag:"done"},
                            on:{
                                onItemClick:function(id){
                                    $$("mainbar").showBatch("details");
                                    $$('details').show();
                                    $$('details').setValues(this.getItem(id));
                                }
                            }
                        } 
                    },
                    {}
                ]
            };
            
            webix.ui.fullScreen();
            
            webix.ui({
                rows:[
                    toolbar,
                    { cells:[ accordion, template], id:"multiview", fitBiggest:true }
                ]
            });
        });
        </script>

    <div id="item_details" style="display:none">
        <h2>#tag#</h2>
        <p style="max-width:320px">#id#. #description#</p>
    </div>


</body>
</html>
